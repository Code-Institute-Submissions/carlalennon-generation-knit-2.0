{% extends 'base.html' %} {% load thumbnail %} {% block title %} {{ user }}'s Profile{% endblock %} {% block body %}

<div class="card-body d-flex justify-content-center p-3">
    <p class="card-text">
        {% thumbnail user.profile.image "300x300" crop="center" as im %}
        <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}"> {% endthumbnail %}
    </p>
</div>
<div class="card">
    <div class="card-body">
        <h5 class="card-title">
            {{ user.username }}
        </h5>
        {{ user.profile.bio|safe }}
    </div>
</div>

<table class="table table-hover">
    <thead>
    </thead>
    <tbody>
        <tr>
            <th scope="row">Patterns:</th>
            <td>{{ num_patterns }}</td>
        </tr>
    </tbody>
</table>

<!-- User patterns -->
<div class="container">
    <!-- Styling for small screen -->

    <div class="row d-lg-none">
        {% for pattern in patterns %}
        <div class="card col-12 ">
            <div class="row">
                <div class="col">
                    <a href="{% url 'feed:detail' pattern.id %}" class="nav-link">
                        {% thumbnail pattern.image "100x100" crop="center" as im %}
                        <img src="{{ im.url }}" class="img-fluid">
                        {% endthumbnail %}
                        {{ pattern.title}}
                    </a>
                </div>
                <div class="col d-flex justify-content-end align-items-center">
                    <a href="{% url 'profiles:profile' pattern.author.username %}" class="text-decoration-none link-secondary ">
                        {{ pattern.author }}
                        {% thumbnail pattern.author.profile.image "50x50" crop="center" as im %}
                        <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
                        {% endthumbnail %}
                    </a>
                </div>
            </div>
        </div>

    <!-- Styling for large screen -->
    <div class="row d-none d-lg-flex">
        {% for pattern in patterns %}
        <div class="col-lg-3">
            <div class="card d-flex">
                <div class="text-center">
                    <h3>
                        {{ pattern.title }}
                    </h3>
                </div>
                <a href="{% url 'feed:detail' pattern.id %}">
                    {% thumbnail pattern.image "300x300" crop="center" as im %}
                    <img src="{{ im.url }}" class="img-fluid">
                    {% endthumbnail %}
                </a>
                <div class="card-body">
                    <p class="card-text float-end">
                        by
                        <a href="{% url 'profiles:profile' pattern.author.username %}" class="text-decoration-none link-secondary">
                            <b>{{ pattern.author }}</b> {% thumbnail pattern.author.profile.image "50x50" crop="center" as im %}
                            <img src="{{ im.url }}" class="img-fluid"> {% endthumbnail %}
                        </a>
                    </p>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="card">
            <div class="card-body">
                <p>This author has not authored any patterns</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Buttons for logged in member only -->
{% if request.user.is_authenticated and user.username == request.user.username %}
<div class="container-fluid d-flex justify-content-center">
    <div class="btn-group" role="group" aria-label="Edit or delete pattern">
        <a href="{% url 'profiles:edit' user.username %}">
            <button type="button" class="btn btn-outline-primary">
                Edit profile
            </button>
        </a>
        <a href="{% url 'profiles:delete' user.username %}">
            <button type="button" class="btn btn-outline-primary">
                Delete profile
            </button>
        </a>
    </div>
</div>
{% endif %} {% endblock %}