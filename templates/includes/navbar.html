{% load thumbnail %}

<nav class="navbar" style="background-color: #ced4da;">
  <div class="container">
    <div>
      <button class="btn btn-default" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
        Menu
      </button>
      <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasExampleLabel">Offcanvas</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <div>
            Where to?
          </div>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'search:search' %}">Search</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'pattern:add' %}">Add pattern</a>
            </li>
            {% if request.user.is_authenticated %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'profiles:profile' user.username %}">My Profile</a>
            </li>
            {% else %}
            {% endif %}
            <li class="nav-item">
              {% if request.user.is_authenticated %}
              <a class="nav-link" href="{% url 'account_logout' %}">Sign Out</a>
              {% else %}
              <a class="nav-link" href="{% url 'account_login' %}">Login</a>
              {% endif %}
            </li>
          </ul>
        </div>
      </div>
    </div>
    <a class="navbar-brand" href="#">
      <img class="img-fluid"src="https://res.cloudinary.com/duekocfq6/image/upload/v1708004906/static/logo-lg_idyzwe.png" alt="Generation Knit" width="300" height="60">
    </a>
    {% if request.user.is_authenticated %}
    <div class="float-end justify-content-end" id="user-information" aria="username and profile picture">
      <a class="nav-link" href="{% url 'profiles:profile' user.username %}">
      {{ request.user.username}}
      {% thumbnail request.user.profile.image "30x30" crop="center" as im %}
      <img class="justify-content-end thumbnail" src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height}}"> 
  {% endthumbnail %}
</a>
  {% else %}
  <a class="nav-link" href="{% url 'account_login' %}">Login</a>
  {% endif %}
    </div>
  </div>
</nav>
